<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zhu.ssm.dao.GoodsDao">
	<sql id = "inc_whereOrder">
		where 1=1 
		<if test="orderid!=null">
			and orderid=#{orderid}
		</if>
		<if test="goodsid!=null">
			and goodsid=#{goodsid}
		</if>
		<if test="userid!=null">
			and userid=#{userid}
		</if>
		<if test="price!=null">
			and price=#{price}
		</if>
		<if test="qty!=null">
			and qty=#{qty}
		</if>
		<if test="predate!=null">
			and predate=#{peqdate}
		</if>
	</sql>
	<insert id="insert">
		INSERT INTO order(orderid,userid,goodsid,price,qty,predate,remark)
		VALUES(
			#{orderid,jdbcType=VARCHAR},
			#{userid,jdbcType=VARCHAR},
			#{goodsid,jdbcType=VARCHAR},
			#{price,jdbcType=DOUBLE},
			#{predate,jdbcType=DATE},
			#{remark,jdbcType=LONGVARCHAR}
		)
	</insert>
	<select id="select" resultType="com.zhu.ssm.model.Order">
		SELECT * FROM
		orders o,t_user u,goods g
		<include refid="inc_whereClause"></include>
		and o.userid = u.userid and o.goodsid = g.goodsid
	</select>
	<delete id="delete">
		DELETE FROM order 
		<include refid="inc_whereClause"></include>
	</delete>
</mapper>
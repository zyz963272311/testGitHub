<%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<%
	String path = request.getContextPath();
	String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<script type="text/javascript" src="<%=path %>/resources/js/echarts.min.js"></script>
<script type="text/javascript">
	var num = Math.random();//Math.random()：得到一个0到1之间的随机数
	function ld(ttl,leg,xa,ser,id)
	{
		//数据
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById(id));

        // 指定图表的配置项和数据
        var option = {
            title: {
                text: ttl
            },
            tooltip: {},
            legend: {
                data:leg
            },
            xAxis: {
                data: xa
            },
            yAxis: {},
            series: ser
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
	};
	function clk(id)
	{
		//数据
		var x=1,y=5;
		var title = "EChart";
		var legend = getLegend(x);
		var xAxis=getXAxis(y);
		var series = getSeries(x, y, "bar");
		ld(title, legend, xAxis, series, id);
	};
	function getData(x,y)
	{
		
		var data="";
		for(var i = 0;i<x;i++)
		{
			for(var j = 0;j<y;j++)
			{
				data+= Math.ceil(num * 80);//num*80的取值范围在0~80之间,使用向上取整就可以得到一个1~80的随机数
			}
		}
		return data;
	};
	//说明，这里的legend的每一位必须与series中的name有对应关系，将会自动生成
	function getLegend(x)
	{
		var legend=[];
		for(var i=0;i<x;i++)
		{
			legend[i]='name'+i;
		}
		return legend;
	};
	//这里随意指定
	function getXAxis(x)
	{
		var xAxis=[];
		for(var i =0;i<x;i++)
		{
			xAxis[i]="xAxis"+i;
		}
		return xAxis;
	};
	function getSeries(x,y,type)
	{
		var series=[];
		for(var i = 0;i<x;i++)
		{
			var name="name"+i;
			var data=getYData(y);
			series[i]=Series(name, type, data);
		}
		return series;
	};
	function getYData(y)
	{
		var data=[];
		for(var i=0;i<y;i++)
		{
			num = Math.random();
			data[i]=Math.ceil(num * 80);
		}
		return data;
	};
	function Series(name,type,data)
	{
		var series = new Object;
		series.name=name;
		series.type=type;
		series.data=data;
		return series;
	}
    </script>
<title>Insert title here</title>
</head>
<body >
<input type="button" onclick="clk('main')" value="点击生成柱状图">
<div id="main" style="width: 600px;height:400px;"></div>

</body>
</html>